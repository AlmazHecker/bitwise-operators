<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <title>Binary AND with Division Animation (Refactored)</title>
  </head>
  <body>
    <h1>Binary AND Animation with Parallel Division by 2</h1>

    <div class="input-container">
      <label for="num1">First Number:</label>
      <input type="number" id="num1" min="0" max="255" value="25" />

      <label for="num2">Second Number:</label>
      <input type="number" id="num2" min="0" max="255" value="45" />

      <button id="submitBtn">Calculate AND</button>
    </div>

    <div class="animation-container" id="animationContainer">
      <div class="step" id="step1">
        <h3>Step 1: Converting to Binary with Division by 2 (Parallel)</h3>
        <div class="division-container">
          <div class="division-block" id="divisionAnimationNum1"></div>
          <div class="division-block" id="divisionAnimationNum2"></div>
        </div>
        <div id="binaryConversion"></div>
      </div>

      <div class="step" id="step2">
        <h3>Step 2: Aligning Binary Numbers</h3>
        <div id="binaryAlignment"></div>
      </div>

      <div class="step" id="step3">
        <h3>Step 3: AND Operation</h3>
        <div class="operation-rules">
          <p><strong>AND rules:</strong> 0∧0=0, 0∧1=0, 1∧0=0, 1∧1=1</p>
        </div>
        <div id="operation"></div>
      </div>

      <div class="step" id="step4">
        <h3>Step 4: Final Result</h3>
        <div class="result-box">
          <div id="finalResult"></div>
        </div>
      </div>
    </div>

    <script type="module">
      import { runCompleteAnimation, bitwiseAND } from './utils/index.ts';

      function startAnimation() {
        const num1 = parseInt(document.getElementById("num1").value) || 0;
        const num2 = parseInt(document.getElementById("num2").value) || 0;

        runCompleteAnimation(num1, num2, bitwiseAND, "AND");
      }

      document.getElementById("submitBtn").addEventListener("click", startAnimation);

    </script>
  </body>
</html>
